[
  {
    "id": "sky_call_lightning",
    "type": "SPELL",
    "name": "Call Down the Storm's Fury",
    "description": "By calling out to the sky, you can summon a bolt of lightning to crash into your enemies.  Does not work at all under a cloudless sky, and has increasing effect as the weather gets stormier.",
    "valid_targets": [ "self" ],
		"flags": [ "CONCENTRATE", "SOMATIC", "VERBAL", "NO_EXPLOSION_SFX" ],
	  "skill": "occult",
		"spell_class": "SKY",
    "effect": "effect_on_condition",
    "effect_str": "EOC_SKY_CALL_LIGHTNING",
		"extra_effects": [ { "id": "channeling_fatigue_spell", "hit_self": true, "max_level": 2 } ],
    "shape": "blast",
		"energy_source": "MANA",
		"difficulty": 5,
		"max_level": 15,
    "base_casting_time": 1500,
    "final_casting_time": 500,
    "casting_time_increment": -66.67,
		"base_energy_cost": 800
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_SKY_CALL_LIGHTNING",
		"condition": {
			"and": [
				"u_is_outside",
				{ 
					"or": [
						{ "is_weather": "thunder" },
						{ "is_weather": "lightning" }
					]
				}
			]
    },
    "effect": { "u_cast_spell": { "id": "sky_call_lightning_real", "min_level": 15 } },
    "false_effect": [ { "run_eocs": "EOC_SKY_CALL_LIGHTNING_2" } ]
  },
  {
		"type": "effect_on_condition",
		"id": "EOC_SKY_CALL_LIGHTNING_2",
		"condition": {
			"and": [
				"u_is_outside",
				{ 
					"or": [
						{ "is_weather": "rainstorm" },
						{ "is_weather": "rain" },
						{ "is_weather": "drizzle" }
					]
				}
			]
    },
    "effect": { "u_cast_spell": { "id": "sky_call_lightning_real", "min_level": 10, "max_level": 10 } },
    "false_effect": [ { "run_eocs": "EOC_SKY_CALL_LIGHTNING_3" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_SKY_CALL_LIGHTNING_3",
		"condition": {
			"and": [
				"u_is_outside",
				{ 
					"or": [
						{ "is_weather": "light_drizzle" },
						{ "is_weather": "Cloudy" }
					]
				}
			]
    },
    "effect": { "u_cast_spell": { "id": "sky_call_lightning_real", "min_level": 5,  "max_level": 5 } },
    "false_effect": [ { "run_eocs": "EOC_SKY_CALL_LIGHTNING_4" } ]
  },
  {    
    "type": "effect_on_condition",
    "id": "EOC_SKY_CALL_LIGHTNING_4",
    "condition": {
      "and": [
        { "u_has_item": "crystallized_mana_sky" },
        "u_is_outside"
			]
    },
    "effect": [
      { "u_cast_spell": { "id": "sky_call_lightning_real", "min_level": 7,  "max_level": 7, "message": "Though the weather conditions are wrong, you draw on the power in the crystallized mana to call the lightning". } },
      { "u_consume_item": "crystallized_mana_sky" }
    ],
    "false_effect": [ { "run_eocs": "EOC_SKY_CALL_LIGHTNING_5" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_SKY_CALL_LIGHTNING_5",
    "effect": [
      { "u_message": "The weather conditions aren't right, and your incantations have no effect." }
    ]
  },
  {
    "id": "sky_call_lightning_real",
    "type": "SPELL",
    "name": "Call Lightning",
    "description": "This is the actual lightning bolt.  It's a bug if you can see it.",
    "valid_targets": [ "hostile" ],
    "flags": [ "LOUD", "RANDOM_DAMAGE", "NON_MAGICAL" ],
    "max_level": 15,
    "min_damage": 80,
    "max_damage": 200,
    "damage_increment": 4,
    "min_range": 30,
    "max_range": 40,
    "range_increment": 0.75,
    "min_aoe": 1,
    "max_aoe": 1,
    "field_id": "fd_fire",
    "min_field_intensity": 1,
    "max_field_intensity": 1,
    "field_chance": 1,
    "damage_type": "electric",
    "sound_description": "a crackle"
  },
	{
    "id": "sky_reveal_world_map",
    "type": "SPELL",
    "name": "Like a Bird on the Wing",
    "description": "Close your eyes and open yourself up to the sky, gazing down on the land below from a great height.  The ritual will only work when you have an unobstructed view of the sky.",
    "valid_targets": [ "self" ],
		"skill": "occult",
    "flags": [ "SOMATIC", "VERBAL", "CONCENTRATE", "SILENT" ],
    "effect": "effect_on_condition",
    "effect_str": "EOC_SKY_BIRD_MAP",
		"extra_effects": [ { "id": "channeling_fatigue_spell", "hit_self": true, "max_level": 2 } ],
		"spell_class": "SKY",
    "shape": "blast",
    "max_level": 15,
    "base_casting_time": 30000,
    "energy_source": "MANA",
    "base_energy_cost": 1000,
    "difficulty": 4
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_SKY_BIRD_MAP",
    "condition": "u_is_outside",
    "effect": {
      "switch": { "u_val": "spell_level", "spell": "sky_reveal_world_map" },
      "cases": [
        { "case": 0, "effect": { "u_cast_spell": { "id": "sky_bird_map_1" } } },
        { "case": 2, "effect": { "u_cast_spell": { "id": "sky_bird_map_2" } } },
        { "case": 4, "effect": { "u_cast_spell": { "id": "sky_bird_map_3" } } },
        { "case": 6, "effect": { "u_cast_spell": { "id": "sky_bird_map_4" } } },
        { "case": 8, "effect": { "u_cast_spell": { "id": "sky_bird_map_5" } } },
        { "case": 10, "effect": { "u_cast_spell": { "id": "sky_bird_map_6" } } },
        { "case": 12, "effect": { "u_cast_spell": { "id": "sky_bird_map_7" } } },
        { "case": 14, "effect": { "u_cast_spell": { "id": "sky_bird_map_8" } } }
      ]
    },
    "false_effect": [ { "u_message": "Without a view of the open sky, the spell fails." } ]
  },
  {
    "id": "sky_bird_map_1",
    "type": "SPELL",
    "name": "Sky Reveal Map EOC cast #1",
    "description": "This is one of the spells that actually fires when you cast Like a Bird on the Wing.  It's a bug if you have it.",
    "valid_targets": [ "none" ],
    "message": "The secrets of the living earth are revealed to you.",
    "flags": [ "NO_HANDS", "CONCENTRATE", "SILENT" ],
    "effect": "map",
    "shape": "blast",
    "max_level": 1,
    "min_aoe": 10
  },
  {
    "id": "sky_bird_map_2",
    "type": "SPELL",
    "name": "Sky Reveal Map EOC cast #2",
    "description": "This is the spell that actually fires when you cast Like a Bird on the Wing.  It's a bug if you have it.",
    "valid_targets": [ "none" ],
    "message": "The secrets of the living earth are revealed to you.",
    "flags": [ "NO_HANDS", "CONCENTRATE", "SILENT" ],
    "effect": "map",
    "shape": "blast",
    "max_level": 1,
    "min_aoe": 14
  },
  {
    "id": "sky_bird_map_3",
    "type": "SPELL",
    "name": "Sky Reveal Map EOC cast #3",
    "description": "This is the spell that actually fires when you cast Like a Bird on the Wing.  It's a bug if you have it.",
    "valid_targets": [ "none" ],
    "message": "The secrets of the living earth are revealed to you.",
    "flags": [ "NO_HANDS", "CONCENTRATE", "SILENT" ],
    "effect": "map",
    "shape": "blast",
    "max_level": 1,
    "min_aoe": 18
  },
  {
    "id": "sky_bird_map_4",
    "type": "SPELL",
    "name": "Sky Reveal Map EOC cast #4",
    "description": "This is the spell that actually fires when you cast Like a Bird on the Wing.  It's a bug if you have it.",
    "valid_targets": [ "none" ],
    "message": "The secrets of the living earth are revealed to you.",
    "flags": [ "NO_HANDS", "CONCENTRATE", "SILENT" ],
    "effect": "map",
    "shape": "blast",
    "max_level": 1,
    "min_aoe": 22
  },
  {
    "id": "sky_bird_map_5",
    "type": "SPELL",
    "name": "Sky Reveal Map EOC cast #5",
    "description": "This is the spell that actually fires when you cast Like a Bird on the Wing.  It's a bug if you have it.",
    "valid_targets": [ "none" ],
    "message": "The secrets of the living earth are revealed to you.",
    "flags": [ "NO_HANDS", "CONCENTRATE", "SILENT" ],
    "effect": "map",
    "shape": "blast",
    "max_level": 1,
    "min_aoe": 26
  },
  {
    "id": "sky_bird_map_6",
    "type": "SPELL",
    "name": "Sky Reveal Map EOC cast #6",
    "description": "This is the spell that actually fires when you cast Like a Bird on the Wing.  It's a bug if you have it.",
    "valid_targets": [ "none" ],
    "message": "The secrets of the living earth are revealed to you.",
    "flags": [ "NO_HANDS", "CONCENTRATE", "SILENT" ],
    "effect": "map",
    "shape": "blast",
    "max_level": 1,
    "min_aoe": 30
  },
  {
    "id": "sky_bird_map_7",
    "type": "SPELL",
    "name": "Sky Reveal Map EOC cast #7",
    "description": "This is the spell that actually fires when you cast Like a Bird on the Wing.  It's a bug if you have it.",
    "valid_targets": [ "none" ],
    "message": "The secrets of the living earth are revealed to you.",
    "flags": [ "NO_HANDS", "CONCENTRATE", "SILENT" ],
    "effect": "map",
    "shape": "blast",
    "max_level": 1,
    "min_aoe": 35
  },
  {
    "id": "sky_bird_map_8",
    "type": "SPELL",
    "name": "Sky Reveal Map EOC cast #8",
    "description": "This is the spell that actually fires when you cast Like a Bird on the Wing.  It's a bug if you have it.",
    "valid_targets": [ "none" ],
    "message": "The secrets of the living earth are revealed to you.",
    "flags": [ "NO_HANDS", "CONCENTRATE", "SILENT" ],
    "effect": "map",
    "shape": "blast",
    "max_level": 1,
    "min_aoe": 40
  }
]
